/*!
 * Parse JavaScript SDK
 * Version: 1.2.8
 * Built: Mon Jun 03 2013 13:45:00
 * http://parse.com
 *
 * Copyright 2013 Parse, Inc.
 * The Parse JavaScript SDK is freely distributable under the MIT license.
 *
 * Includes: Underscore.js
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * Released under the MIT license.
 */
(function(a,b){if(typeof exports!=="undefined"){b(a,exports,require("underscore"))}else{if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(d,e,c){a.Parse=b(a,c,d,e)})}else{a.Parse=b(a,{},a._,(a.jQuery||a.Zepto||a.ender||a.$))}}}(this,function(I,h,ag,P){h.VERSION="js1.2.8";var s=I._;var V={};var U=Array.prototype,k=Object.prototype,A=Function.prototype;var Z=U.push,x=U.slice,K=U.concat,g=k.toString,o=k.hasOwnProperty;var af=U.forEach,z=U.map,W=U.reduce,e=U.reduceRight,b=U.filter,Q=U.every,y=U.some,w=U.indexOf,u=U.lastIndexOf,F=Array.isArray,j=Object.keys,X=A.bind;var ag=function(ah){if(ah instanceof ag){return ah}if(!(this instanceof ag)){return new ag(ah)}this._wrapped=ah};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=ag}exports._=ag}else{I._=ag}ag.VERSION="1.4.4";var aa=ag.each=ag.forEach=function(am,al,ak){if(am==null){return}if(af&&am.forEach===af){am.forEach(al,ak)}else{if(am.length===+am.length){for(var aj=0,ah=am.length;aj<ah;aj++){if(al.call(ak,am[aj],aj,am)===V){return}}}else{for(var ai in am){if(ag.has(am,ai)){if(al.call(ak,am[ai],ai,am)===V){return}}}}}};ag.map=ag.collect=function(ak,aj,ai){var ah=[];if(ak==null){return ah}if(z&&ak.map===z){return ak.map(aj,ai)}aa(ak,function(an,al,am){ah[ah.length]=aj.call(ai,an,al,am)});return ah};var l="Reduce of empty array with no initial value";ag.reduce=ag.foldl=ag.inject=function(al,ak,ah,aj){var ai=arguments.length>2;if(al==null){al=[]}if(W&&al.reduce===W){if(aj){ak=ag.bind(ak,aj)}return ai?al.reduce(ak,ah):al.reduce(ak)}aa(al,function(ao,am,an){if(!ai){ah=ao;ai=true}else{ah=ak.call(aj,ah,ao,am,an)}});if(!ai){throw new TypeError(l)}return ah};ag.reduceRight=ag.foldr=function(an,ak,ah,aj){var ai=arguments.length>2;if(an==null){an=[]}if(e&&an.reduceRight===e){if(aj){ak=ag.bind(ak,aj)}return ai?an.reduceRight(ak,ah):an.reduceRight(ak)}var am=an.length;if(am!==+am){var al=ag.keys(an);am=al.length}aa(an,function(aq,ao,ap){ao=al?al[--am]:--am;if(!ai){ah=an[ao];ai=true}else{ah=ak.call(aj,ah,an[ao],ao,ap)}});if(!ai){throw new TypeError(l)}return ah};ag.find=ag.detect=function(ak,aj,ai){var ah;O(ak,function(an,al,am){if(aj.call(ai,an,al,am)){ah=an;return true}});return ah};ag.filter=ag.select=function(ak,aj,ai){var ah=[];if(ak==null){return ah}if(b&&ak.filter===b){return ak.filter(aj,ai)}aa(ak,function(an,al,am){if(aj.call(ai,an,al,am)){ah[ah.length]=an}});return ah};ag.reject=function(aj,ai,ah){return ag.filter(aj,function(am,ak,al){return !ai.call(ah,am,ak,al)},ah)};ag.every=ag.all=function(ak,aj,ai){aj||(aj=ag.identity);var ah=true;if(ak==null){return ah}if(Q&&ak.every===Q){return ak.every(aj,ai)}aa(ak,function(an,al,am){if(!(ah=ah&&aj.call(ai,an,al,am))){return V}});return !!ah};var O=ag.some=ag.any=function(ak,aj,ai){aj||(aj=ag.identity);var ah=false;if(ak==null){return ah}if(y&&ak.some===y){return ak.some(aj,ai)}aa(ak,function(an,al,am){if(ah||(ah=aj.call(ai,an,al,am))){return V}});return !!ah};ag.contains=ag.include=function(ai,ah){if(ai==null){return false}if(w&&ai.indexOf===w){return ai.indexOf(ah)!=-1}return O(ai,function(aj){return aj===ah})};ag.invoke=function(aj,ak){var ah=x.call(arguments,2);var ai=ag.isFunction(ak);return ag.map(aj,function(al){return(ai?ak:al[ak]).apply(al,ah)})};ag.pluck=function(ai,ah){return ag.map(ai,function(aj){return aj[ah]})};ag.where=function(ai,ah,aj){if(ag.isEmpty(ah)){return aj?null:[]}return ag[aj?"find":"filter"](ai,function(al){for(var ak in ah){if(ah[ak]!==al[ak]){return false}}return true})};ag.findWhere=function(ai,ah){return ag.where(ai,ah,true)};ag.max=function(ak,aj,ai){if(!aj&&ag.isArray(ak)&&ak[0]===+ak[0]&&ak.length<65535){return Math.max.apply(Math,ak)}if(!aj&&ag.isEmpty(ak)){return -Infinity}var ah={computed:-Infinity,value:-Infinity};aa(ak,function(ao,al,an){var am=aj?aj.call(ai,ao,al,an):ao;am>=ah.computed&&(ah={value:ao,computed:am})});return ah.value};ag.min=function(ak,aj,ai){if(!aj&&ag.isArray(ak)&&ak[0]===+ak[0]&&ak.length<65535){return Math.min.apply(Math,ak)}if(!aj&&ag.isEmpty(ak)){return Infinity}var ah={computed:Infinity,value:Infinity};aa(ak,function(ao,al,an){var am=aj?aj.call(ai,ao,al,an):ao;am<ah.computed&&(ah={value:ao,computed:am})});return ah.value};ag.shuffle=function(ak){var aj;var ai=0;var ah=[];aa(ak,function(al){aj=ag.random(ai++);ah[ai-1]=ah[aj];ah[aj]=al});return ah};var a=function(ah){return ag.isFunction(ah)?ah:function(ai){return ai[ah]}};ag.sortBy=function(ak,aj,ah){var ai=a(aj);return ag.pluck(ag.map(ak,function(an,al,am){return{value:an,index:al,criteria:ai.call(ah,an,al,am)}}).sort(function(ao,an){var am=ao.criteria;var al=an.criteria;if(am!==al){if(am>al||am===void 0){return 1}if(am<al||al===void 0){return -1}}return ao.index<an.index?-1:1}),"value")};var D=function(am,al,ai,ak){var ah={};var aj=a(al||ag.identity);aa(am,function(ap,an){var ao=aj.call(ai,ap,an,am);ak(ah,ao,ap)});return ah};ag.groupBy=function(aj,ai,ah){return D(aj,ai,ah,function(ak,al,am){(ag.has(ak,al)?ak[al]:(ak[al]=[])).push(am)})};ag.countBy=function(aj,ai,ah){return D(aj,ai,ah,function(ak,al){if(!ag.has(ak,al)){ak[al]=0}ak[al]++})};ag.sortedIndex=function(ao,an,ak,aj){ak=ak==null?ag.identity:a(ak);var am=ak.call(aj,an);var ah=0,al=ao.length;while(ah<al){var ai=(ah+al)>>>1;ak.call(aj,ao[ai])<am?ah=ai+1:al=ai}return ah};ag.toArray=function(ah){if(!ah){return[]}if(ag.isArray(ah)){return x.call(ah)}if(ah.length===+ah.length){return ag.map(ah,ag.identity)}return ag.values(ah)};ag.size=function(ah){if(ah==null){return 0}return(ah.length===+ah.length)?ah.length:ag.keys(ah).length};ag.first=ag.head=ag.take=function(aj,ai,ah){if(aj==null){return void 0}return(ai!=null)&&!ah?x.call(aj,0,ai):aj[0]};ag.initial=function(aj,ai,ah){return x.call(aj,0,aj.length-((ai==null)||ah?1:ai))};ag.last=function(aj,ai,ah){if(aj==null){return void 0}if((ai!=null)&&!ah){return x.call(aj,Math.max(aj.length-ai,0))}else{return aj[aj.length-1]}};ag.rest=ag.tail=ag.drop=function(aj,ai,ah){return x.call(aj,(ai==null)||ah?1:ai)};ag.compact=function(ah){return ag.filter(ah,ag.identity)};var J=function(ai,aj,ah){aa(ai,function(ak){if(ag.isArray(ak)){aj?Z.apply(ah,ak):J(ak,aj,ah)}else{ah.push(ak)}});return ah};ag.flatten=function(ai,ah){return J(ai,ah,[])};ag.without=function(ah){return ag.difference(ah,x.call(arguments,1))};ag.uniq=ag.unique=function(an,am,al,ak){if(ag.isFunction(am)){ak=al;al=am;am=false}var ai=al?ag.map(an,al,ak):an;var aj=[];var ah=[];aa(ai,function(ap,ao){if(am?(!ao||ah[ah.length-1]!==ap):!ag.contains(ah,ap)){ah.push(ap);aj.push(an[ao])}});return aj};ag.union=function(){return ag.uniq(K.apply(U,arguments))};ag.intersection=function(ai){var ah=x.call(arguments,1);return ag.filter(ag.uniq(ai),function(aj){return ag.every(ah,function(ak){return ag.indexOf(ak,aj)>=0})})};ag.difference=function(ai){var ah=K.apply(U,x.call(arguments,1));return ag.filter(ai,function(aj){return !ag.contains(ah,aj)})};ag.zip=function(){var ah=x.call(arguments);var ak=ag.max(ag.pluck(ah,"length"));var aj=new Array(ak);for(var ai=0;ai<ak;ai++){aj[ai]=ag.pluck(ah,""+ai)}return aj};ag.object=function(al,aj){if(al==null){return{}}var ah={};for(var ak=0,ai=al.length;ak<ai;ak++){if(aj){ah[al[ak]]=aj[ak]}else{ah[al[ak][0]]=al[ak][1]}}return ah};ag.indexOf=function(al,aj,ak){if(al==null){return -1}var ai=0,ah=al.length;if(ak){if(typeof ak=="number"){ai=(ak<0?Math.max(0,ah+ak):ak)}else{ai=ag.sortedIndex(al,aj);return al[ai]===aj?ai:-1}}if(w&&al.indexOf===w){return al.indexOf(aj,ak)}for(;ai<ah;ai++){if(al[ai]===aj){return ai}}return -1};ag.lastIndexOf=function(al,aj,ak){if(al==null){return -1}var ah=ak!=null;if(u&&al.lastIndexOf===u){return ah?al.lastIndexOf(aj,ak):al.lastIndexOf(aj)}var ai=(ah?ak:al.length);while(ai--){if(al[ai]===aj){return ai}}return -1};ag.range=function(am,ak,al){if(arguments.length<=1){ak=am||0;am=0}al=arguments[2]||1;var ai=Math.max(Math.ceil((ak-am)/al),0);var ah=0;var aj=new Array(ai);while(ah<ai){aj[ah++]=am;am+=al}return aj};ag.bind=function(aj,ai){if(aj.bind===X&&X){return X.apply(aj,x.call(arguments,1))}var ah=x.call(arguments,2);return function(){return aj.apply(ai,ah.concat(x.call(arguments)))}};ag.partial=function(ai){var ah=x.call(arguments,1);return function(){return ai.apply(this,ah.concat(x.call(arguments)))}};ag.bindAll=function(ai){var ah=x.call(arguments,1);if(ah.length===0){ah=ag.functions(ai)}aa(ah,function(aj){ai[aj]=ag.bind(ai[aj],ai)});return ai};ag.memoize=function(aj,ai){var ah={};ai||(ai=ag.identity);return function(){var ak=ai.apply(this,arguments);return ag.has(ah,ak)?ah[ak]:(ah[ak]=aj.apply(this,arguments))}};ag.delay=function(ai,aj){var ah=x.call(arguments,2);return setTimeout(function(){return ai.apply(null,ah)},aj)};ag.defer=function(ah){return ag.delay.apply(ag,[ah,1].concat(x.call(arguments,1)))};ag.throttle=function(am,ao){var ak,aj,an,ah;var al=0;var ai=function(){al=new Date;an=null;ah=am.apply(ak,aj)};return function(){var ap=new Date;var aq=ao-(ap-al);ak=this;aj=arguments;if(aq<=0){clearTimeout(an);an=null;al=ap;ah=am.apply(ak,aj)}else{if(!an){an=setTimeout(ai,aq)}}return ah}};ag.debounce=function(aj,al,ai){var ak,ah;return function(){var ap=this,ao=arguments;var an=function(){ak=null;if(!ai){ah=aj.apply(ap,ao)}};var am=ai&&!ak;clearTimeout(ak);ak=setTimeout(an,al);if(am){ah=aj.apply(ap,ao)}return ah}};ag.once=function(aj){var ah=false,ai;return function(){if(ah){return ai}ah=true;ai=aj.apply(this,arguments);aj=null;return ai}};ag.wrap=function(ah,ai){return function(){var aj=[ah];Z.apply(aj,arguments);return ai.apply(this,aj)}};ag.compose=function(){var ah=arguments;return function(){var ai=arguments;for(var aj=ah.length-1;aj>=0;aj--){ai=[ah[aj].apply(this,ai)]}return ai[0]}};ag.after=function(ai,ah){if(ai<=0){return ah()}return function(){if(--ai<1){return ah.apply(this,arguments)}}};ag.keys=j||function(aj){if(aj!==Object(aj)){throw new TypeError("Invalid object")}var ai=[];for(var ah in aj){if(ag.has(aj,ah)){ai[ai.length]=ah}}return ai};ag.values=function(aj){var ah=[];for(var ai in aj){if(ag.has(aj,ai)){ah.push(aj[ai])}}return ah};ag.pairs=function(aj){var ai=[];for(var ah in aj){if(ag.has(aj,ah)){ai.push([ah,aj[ah]])}}return ai};ag.invert=function(aj){var ah={};for(var ai in aj){if(ag.has(aj,ai)){ah[aj[ai]]=ai}}return ah};ag.functions=ag.methods=function(aj){var ai=[];for(var ah in aj){if(ag.isFunction(aj[ah])){ai.push(ah)}}return ai.sort()};ag.extend=function(ah){aa(x.call(arguments,1),function(ai){if(ai){for(var aj in ai){ah[aj]=ai[aj]}}});return ah};ag.pick=function(ai){var aj={};var ah=K.apply(U,x.call(arguments,1));aa(ah,function(ak){if(ak in ai){aj[ak]=ai[ak]}});return aj};ag.omit=function(aj){var ak={};var ai=K.apply(U,x.call(arguments,1));for(var ah in aj){if(!ag.contains(ai,ah)){ak[ah]=aj[ah]}}return ak};ag.defaults=function(ah){aa(x.call(arguments,1),function(ai){if(ai){for(var aj in ai){if(ah[aj]==null){ah[aj]=ai[aj]}}}});return ah};ag.clone=function(ah){if(!ag.isObject(ah)){return ah}return ag.isArray(ah)?ah.slice():ag.extend({},ah)};ag.tap=function(ai,ah){ah(ai);return ai};var ab=function(ao,an,ai,aj){if(ao===an){return ao!==0||1/ao==1/an}if(ao==null||an==null){return ao===an}if(ao instanceof ag){ao=ao._wrapped}if(an instanceof ag){an=an._wrapped}var al=g.call(ao);if(al!=g.call(an)){return false}switch(al){case"[object String]":return ao==String(an);case"[object Number]":return ao!=+ao?an!=+an:(ao==0?1/ao==1/an:ao==+an);case"[object Date]":case"[object Boolean]":return +ao==+an;case"[object RegExp]":return ao.source==an.source&&ao.global==an.global&&ao.multiline==an.multiline&&ao.ignoreCase==an.ignoreCase}if(typeof ao!="object"||typeof an!="object"){return false}var ah=ai.length;while(ah--){if(ai[ah]==ao){return aj[ah]==an}}ai.push(ao);aj.push(an);var aq=0,ar=true;if(al=="[object Array]"){aq=ao.length;ar=aq==an.length;if(ar){while(aq--){if(!(ar=ab(ao[aq],an[aq],ai,aj))){break}}}}else{var am=ao.constructor,ak=an.constructor;if(am!==ak&&!(ag.isFunction(am)&&(am instanceof am)&&ag.isFunction(ak)&&(ak instanceof ak))){return false}for(var ap in ao){if(ag.has(ao,ap)){aq++;if(!(ar=ag.has(an,ap)&&ab(ao[ap],an[ap],ai,aj))){break}}}if(ar){for(ap in an){if(ag.has(an,ap)&&!(aq--)){break}}ar=!aq}}ai.pop();aj.pop();return ar};ag.isEqual=function(ai,ah){return ab(ai,ah,[],[])};ag.isEmpty=function(ai){if(ai==null){return true}if(ag.isArray(ai)||ag.isString(ai)){return ai.length===0}for(var ah in ai){if(ag.has(ai,ah)){return false}}return true};ag.isElement=function(ah){return !!(ah&&ah.nodeType===1)};ag.isArray=F||function(ah){return g.call(ah)=="[object Array]"};ag.isObject=function(ah){return ah===Object(ah)};aa(["Arguments","Function","String","Number","Date","RegExp"],function(ah){ag["is"+ah]=function(ai){return g.call(ai)=="[object "+ah+"]"}});if(!ag.isArguments(arguments)){ag.isArguments=function(ah){return !!(ah&&ag.has(ah,"callee"))}}if(typeof(/./)!=="function"){ag.isFunction=function(ah){return typeof ah==="function"}}ag.isFinite=function(ah){return isFinite(ah)&&!isNaN(parseFloat(ah))};ag.isNaN=function(ah){return ag.isNumber(ah)&&ah!=+ah};ag.isBoolean=function(ah){return ah===true||ah===false||g.call(ah)=="[object Boolean]"};ag.isNull=function(ah){return ah===null};ag.isUndefined=function(ah){return ah===void 0};ag.has=function(ai,ah){return o.call(ai,ah)};ag.noConflict=function(){I._=s;return this};ag.identity=function(ah){return ah};ag.times=function(al,ak,aj){var ah=Array(al);for(var ai=0;ai<al;ai++){ah[ai]=ak.call(aj,ai)}return ah};ag.random=function(ai,ah){if(ah==null){ah=ai;ai=0}return ai+Math.floor(Math.random()*(ah-ai+1))};var v={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};v.unescape=ag.invert(v.escape);var ad={escape:new RegExp("["+ag.keys(v.escape).join("")+"]","g"),unescape:new RegExp("("+ag.keys(v.unescape).join("|")+")","g")};ag.each(["escape","unescape"],function(ah){ag[ah]=function(ai){if(ai==null){return""}return(""+ai).replace(ad[ah],function(aj){return v[ah][aj]})}});ag.result=function(ah,aj){if(ah==null){return null}var ai=ah[aj];return ag.isFunction(ai)?ai.call(ah):ai};ag.mixin=function(ah){aa(ag.functions(ah),function(ai){var aj=ag[ai]=ah[ai];ag.prototype[ai]=function(){var ak=[this._wrapped];Z.apply(ak,arguments);return C.call(this,aj.apply(ag,ak))}})};var M=0;ag.uniqueId=function(ah){var ai=++M+"";return ah?ah+ai:ai};ag.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/;var m={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var n=/\\|'|\r|\n|\t|\u2028|\u2029/g;ag.template=function(ap,ak,aj){var ai;aj=ag.defaults({},aj,ag.templateSettings);var al=new RegExp([(aj.escape||G).source,(aj.interpolate||G).source,(aj.evaluate||G).source].join("|")+"|$","g");var am=0;var ah="__p+='";ap.replace(al,function(ar,at,aq,av,au){ah+=ap.slice(am,au).replace(n,function(aw){return"\\"+m[aw]});if(at){ah+="'+\n((__t=("+at+"))==null?'':_.escape(__t))+\n'"}if(aq){ah+="'+\n((__t=("+aq+"))==null?'':__t)+\n'"}if(av){ah+="';\n"+av+"\n__p+='"}am=au+ar.length;return ar});ah+="';\n";if(!aj.variable){ah="with(obj||{}){\n"+ah+"}\n"}ah="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+ah+"return __p;\n";try{ai=new Function(aj.variable||"obj","_",ah)}catch(an){an.source=ah;throw an}if(ak){return ai(ak,ag)}var ao=function(aq){return ai.call(this,aq,ag)};ao.source="function("+(aj.variable||"obj")+"){\n"+ah+"}";return ao};ag.chain=function(ah){return ag(ah).chain()};var C=function(ah){return this._chain?ag(ah).chain():ah};ag.mixin(ag);aa(["pop","push","reverse","shift","sort","splice","unshift"],function(ah){var ai=U[ah];ag.prototype[ah]=function(){var aj=this._wrapped;ai.apply(aj,arguments);if((ah=="shift"||ah=="splice")&&aj.length===0){delete aj[0]}return C.call(this,aj)}});aa(["concat","join","slice"],function(ah){var ai=U[ah];ag.prototype[ah]=function(){return C.call(this,ai.apply(this._wrapped,arguments))}});ag.extend(ag.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}});if(typeof(exports)!=="undefined"&&exports._){h._=exports._.noConflict();h.localStorage=require("localStorage");h.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;exports.Parse=h}else{h._=ag.noConflict();if(typeof(localStorage)!=="undefined"){h.localStorage=localStorage}if(typeof(XMLHttpRequest)!=="undefined"){h.XMLHttpRequest=XMLHttpRequest}}if(typeof(P)!=="undefined"){h.$=P}var r=function(){};var f=function(ai,ah,aj){var ak;if(ah&&ah.hasOwnProperty("constructor")){ak=ah.constructor}else{ak=function(){ai.apply(this,arguments)}}h._.extend(ak,ai);r.prototype=ai.prototype;ak.prototype=new r();if(ah){h._.extend(ak.prototype,ah)}if(aj){h._.extend(ak,aj)}ak.prototype.constructor=ak;ak.__super__=ai.prototype;return ak};h.serverURL="https://api.parse.com";if(typeof(process)!=="undefined"&&process.versions&&process.versions.node){h._isNode=true}h.initialize=function(aj,ai,ah){if(ah){throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js."}h._initialize(aj,ai)};h._initialize=function(aj,ai,ah){h.applicationId=aj;h.javaScriptKey=ai;h.masterKey=ah;h._useMasterKey=false};if(h._isNode){h.initialize=h._initialize;h.Cloud=h.Cloud||{};h.Cloud.useMasterKey=function(){h._useMasterKey=true}}h._getParsePath=function(ah){if(!h.applicationId){throw"You need to call Parse.initialize before using Parse."}if(!ah){ah=""}if(!h._.isString(ah)){throw"Tried to get a localStorage path that wasn't a String."}if(ah[0]==="/"){ah=ah.substring(1)}return"Parse/"+h.applicationId+"/"+ah};h._installationId=null;h._getInstallationId=function(){if(h._installationId){return h._installationId}var ai=h._getParsePath("installationId");h._installationId=h.localStorage.getItem(ai);if(!h._installationId||h._installationId===""){var ah=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};h._installationId=(ah()+ah()+"-"+ah()+"-"+ah()+"-"+ah()+"-"+ah()+ah()+ah());h.localStorage.setItem(ai,h._installationId)}return h._installationId};h._parseDate=function(aq){var an=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$");var al=an.exec(aq);if(!al){return null}var ao=al[1]||0;var am=(al[2]||1)-1;var ap=al[3]||0;var aj=al[4]||0;var ai=al[5]||0;var ah=al[6]||0;var ak=al[8]||0;return new Date(Date.UTC(ao,am,ap,aj,ai,ah,ak))};h._ajaxIE8=function(al,ai,aj){var ak=new h.Promise();var ah=new XDomainRequest();ah.onload=function(){var am;try{am=JSON.parse(ah.responseText)}catch(an){ak.reject(an)}if(am){ak.resolve(am)}};ah.onerror=ah.ontimeout=function(){ak.reject(ah)};ah.onprogress=function(){};ah.open(al,ai);ah.send(aj);return ak};h._ajax=function(ah,ai,aj,am,al){var ap={success:am,error:al};if(typeof(XDomainRequest)!=="undefined"){return h._ajaxIE8(ah,ai,aj)._thenRunCallbacks(ap)}var ao=new h.Promise();var ak=false;var an=new h.XMLHttpRequest();an.onreadystatechange=function(){if(an.readyState===4){if(ak){return}ak=true;if(an.status>=200&&an.status<300){var aq;try{aq=JSON.parse(an.responseText)}catch(ar){ao.reject(ar)}if(aq){ao.resolve(aq,an.status,an)}}else{ao.reject(an)}}};an.open(ah,ai,true);an.setRequestHeader("Content-Type","text/plain");if(h._isNode){an.setRequestHeader("User-Agent","Parse/"+h.VERSION+" (NodeJS "+process.versions.node+")")}an.send(aj);return ao._thenRunCallbacks(ap)};h._extend=function(ah,ai){var aj=f(this,ah,ai);aj.extend=this.extend;return aj};h._request=function(aj,am,ai,ao,al){if(!h.applicationId){throw"You must specify your applicationId using Parse.initialize"}if(!h.javaScriptKey&&!h.masterKey){throw"You must specify a key using Parse.initialize"}if(aj!=="batch"&&aj!=="classes"&&aj!=="files"&&aj!=="functions"&&aj!=="login"&&aj!=="push"&&aj!=="requestPasswordReset"&&aj!=="users"){throw"Bad route: '"+aj+"'."}var ak=h.serverURL;if(ak.charAt(ak.length-1)!=="/"){ak+="/"}ak+="1/"+aj;if(am){ak+="/"+am}if(ai){ak+="/"+ai}al=h._.clone(al||{});if(ao!=="POST"){al._method=ao;ao="POST"}al._ApplicationId=h.applicationId;if(!h._useMasterKey){al._JavaScriptKey=h.javaScriptKey}else{al._MasterKey=h.masterKey}al._ClientVersion=h.VERSION;al._InstallationId=h._getInstallationId();var ah=h.User.current();if(ah&&ah._sessionToken){al._SessionToken=ah._sessionToken}var an=JSON.stringify(al);return h._ajax(ao,ak,an).then(null,function(ap){var ar;if(ap&&ap.responseText){try{var aq=JSON.parse(ap.responseText);if(aq){ar=new h.Error(aq.code,aq.error)}}catch(at){}}ar=ar||new h.Error(-1,ap.responseText);return h.Promise.error(ar)})};h._getValue=function(ah,ai){if(!(ah&&ah[ai])){return null}return h._.isFunction(ah[ai])?ah[ai]():ah[ai]};h._encode=function(al,ak,aj){var ai=h._;if(al instanceof h.Object){if(aj){throw"Parse.Objects not allowed here"}if(!ak||ai.include(ak,al)||!al._hasData){return al._toPointer()}if(!al.dirty()){ak=ak.concat(al);return h._encode(al._toFullJSON(ak),ak,aj)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(al instanceof h.ACL){return al.toJSON()}if(ai.isDate(al)){return{__type:"Date",iso:al.toJSON()}}if(al instanceof h.GeoPoint){return al.toJSON()}if(ai.isArray(al)){return ai.map(al,function(am){return h._encode(am,ak,aj)})}if(ai.isRegExp(al)){return al.source}if(al instanceof h.Relation){return al.toJSON()}if(al instanceof h.Op){return al.toJSON()}if(al instanceof h.File){if(!al.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:al.name(),url:al.url()}}if(ai.isObject(al)){var ah={};h._objectEach(al,function(an,am){ah[am]=h._encode(an,ak,aj)});return ah}return al};h._decode=function(ak,an){var ai=h._;if(!ai.isObject(an)){return an}if(ai.isArray(an)){h._arrayEach(an,function(aq,ap){an[ap]=h._decode(ap,aq)});return an}if(an instanceof h.Object){return an}if(an instanceof h.File){return an}if(an instanceof h.Op){return an}if(an.__op){return h.Op._decode(an)}if(an.__type==="Pointer"){var ao=h.Object._create(an.className);ao._finishFetch({objectId:an.objectId},false);return ao}if(an.__type==="Object"){var al=an.className;delete an.__type;delete an.className;var ah=h.Object._create(al);ah._finishFetch(an,true);return ah}if(an.__type==="Date"){return h._parseDate(an.iso)}if(an.__type==="GeoPoint"){return new h.GeoPoint({latitude:an.latitude,longitude:an.longitude})}if(ak==="ACL"){if(an instanceof h.ACL){return an}return new h.ACL(an)}if(an.__type==="Relation"){var am=new h.Relation(null,ak);am.targetClassName=an.className;return am}if(an.__type==="File"){var aj=new h.File(an.name);aj._url=an.url;return aj}h._objectEach(an,function(aq,ap){an[ap]=h._decode(ap,aq)});return an};h._arrayEach=h._.each;h._traverse=function(ai,aj,ah){if(ai instanceof h.Object){ah=ah||[];if(h._.indexOf(ah,ai)>=0){return}ah.push(ai);h._traverse(ai.attributes,aj,ah);return aj(ai)}if(ai instanceof h.Relation||ai instanceof h.File){return aj(ai)}if(h._.isArray(ai)){h._.each(ai,function(am,al){var ak=h._traverse(am,aj,ah);if(ak){ai[al]=ak}});return aj(ai)}if(h._.isObject(ai)){h._each(ai,function(am,al){var ak=h._traverse(am,aj,ah);if(ak){ai[al]=ak}});return aj(ai)}return aj(ai)};h._objectEach=h._each=function(ai,aj){var ah=h._;if(ah.isObject(ai)){ah.each(ah.keys(ai),function(ak){aj(ai[ak],ak)})}else{ah.each(ai,aj)}};h._isNullOrUndefined=function(ah){return h._.isNull(ah)||h._.isUndefined(ah)};h.Error=function(ai,ah){this.code=ai;this.message=ah};ag.extend(h.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252});var L=/\s+/;var x=Array.prototype.slice;h.Events={on:function(ak,ao,aj){var ai,am,al,ah,an;if(!ao){return this}ak=ak.split(L);ai=this._callbacks||(this._callbacks={});am=ak.shift();while(am){an=ai[am];al=an?an.tail:{};al.next=ah={};al.context=aj;al.callback=ao;ai[am]={tail:ah,next:an?an.next:al};am=ak.shift()}return this},off:function(ao,am,ai){var ah,ap,aj,al,ak,an;if(!(ap=this._callbacks)){return}if(!(ao||am||ai)){delete this._callbacks;return this}ao=ao?ao.split(L):ag.keys(ap);ah=ao.shift();while(ah){aj=ap[ah];delete ap[ah];if(!aj||!(am||ai)){continue}al=aj.tail;aj=aj.next;while(aj!==al){ak=aj.callback;an=aj.context;if((am&&ak!==am)||(ai&&an!==ai)){this.on(ah,ak,an)}aj=aj.next}ah=ao.shift()}return this},trigger:function(ak){var ao,an,aj,ai,ah,am,al;if(!(aj=this._callbacks)){return this}am=aj.all;ak=ak.split(L);al=x.call(arguments,1);ao=ak.shift();while(ao){an=aj[ao];if(an){ai=an.tail;while((an=an.next)!==ai){an.callback.apply(an.context||this,al)}}an=am;if(an){ai=an.tail;ah=[ao].concat(al);while((an=an.next)!==ai){an.callback.apply(an.context||this,ah)}}ao=ak.shift()}return this}};h.Events.bind=h.Events.on;h.Events.unbind=h.Events.off;h.GeoPoint=function(aj,ai){if(ag.isArray(aj)){h.GeoPoint._validate(aj[0],aj[1]);this.latitude=aj[0];this.longitude=aj[1]}else{if(ag.isObject(aj)){h.GeoPoint._validate(aj.latitude,aj.longitude);this.latitude=aj.latitude;this.longitude=aj.longitude}else{if(ag.isNumber(aj)&&ag.isNumber(ai)){h.GeoPoint._validate(aj,ai);this.latitude=aj;this.longitude=ai}else{this.latitude=0;this.longitude=0}}}var ah=this;if(this.__defineGetter__&&this.__defineSetter__){this._latitude=this.latitude;this._longitude=this.longitude;this.__defineGetter__("latitude",function(){return ah._latitude});this.__defineGetter__("longitude",function(){return ah._longitude});this.__defineSetter__("latitude",function(ak){h.GeoPoint._validate(ak,ah.longitude);ah._latitude=ak});this.__defineSetter__("longitude",function(ak){h.GeoPoint._validate(ah.latitude,ak);ah._longitude=ak})}};h.GeoPoint._validate=function(ai,ah){if(ai<-90){throw"Parse.GeoPoint latitude "+ai+" < -90.0."}if(ai>90){throw"Parse.GeoPoint latitude "+ai+" > 90.0."}if(ah<-180){throw"Parse.GeoPoint longitude "+ah+" < -180.0."}if(ah>180){throw"Parse.GeoPoint longitude "+ah+" > 180.0."}};h.GeoPoint.current=function(ah){var ai=new h.Promise();navigator.geolocation.getCurrentPosition(function(aj){ai.resolve(new h.GeoPoint({latitude:aj.coords.latitude,longitude:aj.coords.longitude}))},function(aj){ai.reject(aj)});return ai._thenRunCallbacks(ah)};h.GeoPoint.prototype={toJSON:function(){h.GeoPoint._validate(this.latitude,this.longitude);return{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(ar){var al=Math.PI/180;var ah=this.latitude*al;var an=this.longitude*al;var aq=ar.latitude*al;var ak=ar.longitude*al;var aj=ah-aq;var am=an-ak;var ai=Math.sin(aj/2);var ao=Math.sin(am/2);var ap=((ai*ai)+(Math.cos(ah)*Math.cos(aq)*ao*ao));ap=Math.min(1,ap);return 2*Math.asin(Math.sqrt(ap))},kilometersTo:function(ah){return this.radiansTo(ah)*6371},milesTo:function(ah){return this.radiansTo(ah)*3958.8}};var B="*";h.ACL=function(ai){var ah=this;ah.permissionsById={};if(ag.isObject(ai)){if(ai instanceof h.User){ah.setReadAccess(ai,true);ah.setWriteAccess(ai,true)}else{if(ag.isFunction(ai)){throw"Parse.ACL() called with a function.  Did you forget ()?"}h._objectEach(ai,function(ak,aj){if(!ag.isString(aj)){throw"Tried to create an ACL with an invalid userId."}ah.permissionsById[aj]={};h._objectEach(ak,function(am,al){if(al!=="read"&&al!=="write"){throw"Tried to create an ACL with an invalid permission type."}if(!ag.isBoolean(am)){throw"Tried to create an ACL with an invalid permission value."}ah.permissionsById[aj][al]=am})})}}};h.ACL.prototype.toJSON=function(){return ag.clone(this.permissionsById)};h.ACL.prototype._setAccess=function(ah,ai,ak){if(ai instanceof h.User){ai=ai.id}else{if(ai instanceof h.Role){ai="role:"+ai.getName()}}if(!ag.isString(ai)){throw"userId must be a string."}if(!ag.isBoolean(ak)){throw"allowed must be either true or false."}var aj=this.permissionsById[ai];if(!aj){if(!ak){return}else{aj={};this.permissionsById[ai]=aj}}if(ak){this.permissionsById[ai][ah]=true}else{delete aj[ah];if(ag.isEmpty(aj)){delete aj[ai]}}};h.ACL.prototype._getAccess=function(ah,ai){if(ai instanceof h.User){ai=ai.id}else{if(ai instanceof h.Role){ai="role:"+ai.getName()}}var aj=this.permissionsById[ai];if(!aj){return false}return aj[ah]?true:false};h.ACL.prototype.setReadAccess=function(ah,ai){this._setAccess("read",ah,ai)};h.ACL.prototype.getReadAccess=function(ah){return this._getAccess("read",ah)};h.ACL.prototype.setWriteAccess=function(ah,ai){this._setAccess("write",ah,ai)};h.ACL.prototype.getWriteAccess=function(ah){return this._getAccess("write",ah)};h.ACL.prototype.setPublicReadAccess=function(ah){this.setReadAccess(B,ah)};h.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(B)};h.ACL.prototype.setPublicWriteAccess=function(ah){this.setWriteAccess(B,ah)};h.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(B)};h.ACL.prototype.getRoleReadAccess=function(ah){if(ah instanceof h.Role){ah=ah.getName()}if(ag.isString(ah)){return this.getReadAccess("role:"+ah)}throw"role must be a Parse.Role or a String"};h.ACL.prototype.getRoleWriteAccess=function(ah){if(ah instanceof h.Role){ah=ah.getName()}if(ag.isString(ah)){return this.getWriteAccess("role:"+ah)}throw"role must be a Parse.Role or a String"};h.ACL.prototype.setRoleReadAccess=function(ai,ah){if(ai instanceof h.Role){ai=ai.getName()}if(ag.isString(ai)){this.setReadAccess("role:"+ai,ah);return}throw"role must be a Parse.Role or a String"};h.ACL.prototype.setRoleWriteAccess=function(ai,ah){if(ai instanceof h.Role){ai=ai.getName()}if(ag.isString(ai)){this.setWriteAccess("role:"+ai,ah);return}throw"role must be a Parse.Role or a String"};h.Op=function(){this._initialize.apply(this,arguments)};h.Op.prototype={_initialize:function(){}};ag.extend(h.Op,{_extend:h._extend,_opDecoderMap:{},_registerDecoder:function(ah,ai){h.Op._opDecoderMap[ah]=ai},_decode:function(ah){var ai=h.Op._opDecoderMap[ah.__op];if(ai){return ai(ah)}else{return undefined}}});h.Op._registerDecoder("Batch",function(ah){var ai=null;h._arrayEach(ah.ops,function(aj){aj=h.Op._decode(aj);ai=aj._mergeWithPrevious(ai)});return ai});h.Op.Set=h.Op._extend({_initialize:function(ah){this._value=ah},value:function(){return this._value},toJSON:function(){return h._encode(this.value())},_mergeWithPrevious:function(ah){return this},_estimate:function(ah){return this.value()}});h.Op._UNSET={};h.Op.Unset=h.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(ah){return this},_estimate:function(ah){return h.Op._UNSET}});h.Op._registerDecoder("Delete",function(ah){return new h.Op.Unset()});h.Op.Increment=h.Op._extend({_initialize:function(ah){this._amount=ah},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(ah){if(!ah){return this}else{if(ah instanceof h.Op.Unset){return new h.Op.Set(this.amount())}else{if(ah instanceof h.Op.Set){return new h.Op.Set(ah.value()+this.amount())}else{if(ah instanceof h.Op.Increment){return new h.Op.Increment(this.amount()+ah.amount())}else{throw"Op is invalid after previous op."}}}}},_estimate:function(ah){if(!ah){return this.amount()}return ah+this.amount()}});h.Op._registerDecoder("Increment",function(ah){return new h.Op.Increment(ah.amount)});h.Op.Add=h.Op._extend({_initialize:function(ah){this._objects=ah},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:h._encode(this.objects())}},_mergeWithPrevious:function(ah){if(!ah){return this}else{if(ah instanceof h.Op.Unset){return new h.Op.Set(this.objects())}else{if(ah instanceof h.Op.Set){return new h.Op.Set(this._estimate(ah.value()))}else{if(ah instanceof h.Op.Add){return new h.Op.Add(ah.objects().concat(this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(ah){if(!ah){return ag.clone(this.objects())}else{return ah.concat(this.objects())}}});h.Op._registerDecoder("Add",function(ah){return new h.Op.Add(h._decode(undefined,ah.objects))});h.Op.AddUnique=h.Op._extend({_initialize:function(ah){this._objects=ag.uniq(ah)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:h._encode(this.objects())}},_mergeWithPrevious:function(ah){if(!ah){return this}else{if(ah instanceof h.Op.Unset){return new h.Op.Set(this.objects())}else{if(ah instanceof h.Op.Set){return new h.Op.Set(this._estimate(ah.value()))}else{if(ah instanceof h.Op.AddUnique){return new h.Op.AddUnique(this._estimate(ah.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(ah){if(!ah){return ag.clone(this.objects())}else{var ai=ag.clone(ah);h._arrayEach(this.objects(),function(al){if(al instanceof h.Object&&al.id){var ak=ag.find(ai,function(am){return(am instanceof h.Object)&&(am.id===al.id)});if(!ak){ai.push(al)}else{var aj=ag.indexOf(ai,ak);ai[aj]=al}}else{if(!ag.contains(ai,al)){ai.push(al)}}});return ai}}});h.Op._registerDecoder("AddUnique",function(ah){return new h.Op.AddUnique(h._decode(undefined,ah.objects))});h.Op.Remove=h.Op._extend({_initialize:function(ah){this._objects=ag.uniq(ah)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:h._encode(this.objects())}},_mergeWithPrevious:function(ah){if(!ah){return this}else{if(ah instanceof h.Op.Unset){return ah}else{if(ah instanceof h.Op.Set){return new h.Op.Set(this._estimate(ah.value()))}else{if(ah instanceof h.Op.Remove){return new h.Op.Remove(ag.union(ah.objects(),this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(ah){if(!ah){return[]}else{var ai=ag.difference(ah,this.objects());h._arrayEach(this.objects(),function(aj){if(aj instanceof h.Object&&aj.id){ai=ag.reject(ai,function(ak){return(ak instanceof h.Object)&&(ak.id===aj.id)})}});return ai}}});h.Op._registerDecoder("Remove",function(ah){return new h.Op.Remove(h._decode(undefined,ah.objects))});h.Op.Relation=h.Op._extend({_initialize:function(ak,ai){this._targetClassName=null;var ah=this;var aj=function(al){if(al instanceof h.Object){if(!al.id){throw"You can't add an unsaved Parse.Object to a relation."}if(!ah._targetClassName){ah._targetClassName=al.className}if(ah._targetClassName!==al.className){throw"Tried to create a Parse.Relation with 2 different types: "+ah._targetClassName+" and "+al.className+"."}return al.id}return al};this.relationsToAdd=ag.uniq(ag.map(ak,aj));this.relationsToRemove=ag.uniq(ag.map(ai,aj))},added:function(){var ah=this;return ag.map(this.relationsToAdd,function(ai){var aj=h.Object._create(ah._targetClassName);aj.id=ai;return aj})},removed:function(){var ah=this;return ag.map(this.relationsToRemove,function(ai){var aj=h.Object._create(ah._targetClassName);aj.id=ai;return aj})},toJSON:function(){var al=null;var aj=null;var ai=this;var ak=function(am){return{__type:"Pointer",className:ai._targetClassName,objectId:am}};var ah=null;if(this.relationsToAdd.length>0){ah=ag.map(this.relationsToAdd,ak);al={__op:"AddRelation",objects:ah}}if(this.relationsToRemove.length>0){ah=ag.map(this.relationsToRemove,ak);aj={__op:"RemoveRelation",objects:ah}}if(al&&aj){return{__op:"Batch",ops:[al,aj]}}return al||aj||{}},_mergeWithPrevious:function(ak){if(!ak){return this}else{if(ak instanceof h.Op.Unset){throw"You can't modify a relation after deleting it."}else{if(ak instanceof h.Op.Relation){if(ak._targetClassName&&ak._targetClassName!==this._targetClassName){throw"Related object must be of class "+ak._targetClassName+", but "+this._targetClassName+" was passed in."}var aj=ag.union(ag.difference(ak.relationsToAdd,this.relationsToRemove),this.relationsToAdd);var ai=ag.union(ag.difference(ak.relationsToRemove,this.relationsToAdd),this.relationsToRemove);var ah=new h.Op.Relation(aj,ai);ah._targetClassName=this._targetClassName;return ah}else{throw"Op is invalid after previous op."}}}},_estimate:function(ai,ah,aj){if(!ai){var ak=new h.Relation(ah,aj);ak.targetClassName=this._targetClassName}else{if(ai instanceof h.Relation){if(this._targetClassName){if(ai.targetClassName){if(ai.targetClassName!==this._targetClassName){throw"Related object must be a "+ai.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{ai.targetClassName=this._targetClassName}}return ai}else{throw"Op is invalid after previous op."}}}});h.Op._registerDecoder("AddRelation",function(ah){return new h.Op.Relation(h._decode(undefined,ah.objects),[])});h.Op._registerDecoder("RemoveRelation",function(ah){return new h.Op.Relation([],h._decode(undefined,ah.objects))});h.Relation=function(ai,ah){this.parent=ai;this.key=ah;this.targetClassName=null};h.Relation.prototype={_ensureParentAndKey:function(ai,ah){this.parent=this.parent||ai;this.key=this.key||ah;if(this.parent!==ai){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==ah){throw"Internal Error. Relation retrieved from two different keys."}},add:function(ah){if(!ag.isArray(ah)){ah=[ah]}var ai=new h.Op.Relation(ah,[]);this.parent.set(this.key,ai);this.targetClassName=ai._targetClassName},remove:function(ah){if(!ag.isArray(ah)){ah=[ah]}var ai=new h.Op.Relation([],ah);this.parent.set(this.key,ai);this.targetClassName=ai._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var ah;var ai;if(!this.targetClassName){ah=h.Object._getSubclass(this.parent.className);ai=new h.Query(ah);ai._extraOptions.redirectClassNameForKey=this.key}else{ah=h.Object._getSubclass(this.targetClassName);ai=new h.Query(ah)}ai._addCondition("$relatedTo","object",this.parent._toPointer());ai._addCondition("$relatedTo","key",this.key);return ai}};h.Promise=function(){this._resolved=false;this._rejected=false;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};ag.extend(h.Promise,{is:function(ah){return ah&&ah.then&&ag.isFunction(ah.then)},as:function(){var ah=new h.Promise();ah.resolve.apply(ah,arguments);return ah},error:function(){var ah=new h.Promise();ah.reject.apply(ah,arguments);return ah},when:function(ak){var am;if(ak&&h._isNullOrUndefined(ak.length)){am=arguments}else{am=ak}var al=am.length;var ai=false;var aj=[];var ao=[];aj.length=am.length;ao.length=am.length;if(al===0){return h.Promise.as.apply(this,aj)}var an=new h.Promise();var ah=function(){al=al-1;if(al===0){if(ai){an.reject(ao)}else{an.resolve.apply(an,aj)}}};h._arrayEach(am,function(ap,aq){if(h.Promise.is(ap)){ap.then(function(ar){aj[aq]=ar;ah()},function(ar){ao[aq]=ar;ai=true;ah()})}else{aj[aq]=ap;ah()}});return an},_continueWhile:function(ah,ai){if(ah()){return ai().then(function(){return h.Promise._continueWhile(ah,ai)})}return h.Promise.as()}});ag.extend(h.Promise.prototype,{resolve:function(ah){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=true;this._result=arguments;var ai=arguments;h._arrayEach(this._resolvedCallbacks,function(aj){aj.apply(this,ai)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(ah){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=true;this._error=ah;h._arrayEach(this._rejectedCallbacks,function(ai){ai(ah)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(ah,aj){var ak=new h.Promise();var al=function(){var am=arguments;if(ah){am=[ah.apply(this,am)]}if(am.length===1&&h.Promise.is(am[0])){am[0].then(function(){ak.resolve.apply(ak,arguments)},function(an){ak.reject(an)})}else{ak.resolve.apply(ak,am)}};var ai=function(an){var am=[];if(aj){am=[aj(an)];if(am.length===1&&h.Promise.is(am[0])){am[0].then(function(){ak.resolve.apply(ak,arguments)},function(ao){ak.reject(ao)})}else{ak.reject(am[0])}}else{ak.reject(an)}};if(this._resolved){al.apply(this,this._result)}else{if(this._rejected){ai(this._error)}else{this._resolvedCallbacks.push(al);this._rejectedCallbacks.push(ai)}}return ak},_thenRunCallbacks:function(aj,ai){var ah;if(ag.isFunction(aj)){var ak=aj;ah={success:function(al){ak(al,null)},error:function(al){ak(null,al)}}}else{ah=ag.clone(aj)}ah=ah||{};return this.then(function(al){if(ah.success){ah.success.apply(this,arguments)}else{if(ai){ai.trigger("sync",ai,al,ah)}}return h.Promise.as.apply(h.Promise,arguments)},function(al){if(ah.error){if(!ag.isUndefined(ai)){ah.error(ai,al)}else{ah.error(al)}}else{if(ai){ai.trigger("error",ai,al,ah)}}return h.Promise.error(al)})},_continueWith:function(ah){return this.then(function(){return ah(arguments,null)},function(ai){return ah(null,ai)})}});var T=function(ah){if(ah<26){return String.fromCharCode(65+ah)}if(ah<52){return String.fromCharCode(97+(ah-26))}if(ah<62){return String.fromCharCode(48+(ah-52))}if(ah===62){return"+"}if(ah===63){return"/"}throw"Tried to encode large digit "+ah+" in base64."};var q=function(ai){var ah=[];ah.length=Math.ceil(ai.length/3);ag.times(ah.length,function(am){var al=ai[am*3];var ak=ai[am*3+1]||0;var aj=ai[am*3+2]||0;var ao=(am*3+1)<ai.length;var an=(am*3+2)<ai.length;ah[am]=[T((al>>2)&63),T(((al<<4)&48)|((ak>>4)&15)),ao?T(((ak<<2)&60)|((aj>>6)&3)):"=",an?T(aj&63):"="].join("")});return ah.join("")};var N={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};var Y=function(ai,aj){var ak=new h.Promise();if(typeof(FileReader)==="undefined"){return h.Promise.error(new h.Error(-1,"Attempted to use a FileReader on an unsupported browser."))}var ah=new FileReader();ah.onloadend=function(){if(ah.readyState!==2){ak.reject(new h.Error(-1,"Error reading file."));return}var am=ah.result;var al=/^data:([^;]*);base64,(.*)$/.exec(am);if(!al){ak.reject(new h.Error(-1,"Unable to interpret data URL: "+am));return}ak.resolve(al[2],aj||al[1])};ah.readAsDataURL(ai);return ak};h.File=function(ah,aj,ai){this._name=ah;var al=/\.([^.]*)$/.exec(ah);if(al){al=al[1].toLowerCase()}var ak=ai||N[al]||"text/plain";if(ag.isArray(aj)){this._source=h.Promise.as(q(aj),ak)}else{if(aj&&aj.base64){this._source=h.Promise.as(aj.base64,ak)}else{if(typeof(File)!=="undefined"&&aj instanceof File){this._source=Y(aj,ai)}else{if(ag.isString(aj)){throw"Creating a Parse.File from a String is not yet supported."}}}}};h.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(ai){var ah=this;if(!ah._previousSave){ah._previousSave=ah._source.then(function(aj,ak){var al={base64:aj,_ContentType:ak};return h._request("files",ah._name,null,"POST",al)}).then(function(aj){ah._name=aj.name;ah._url=aj.url;return ah})}return ah._previousSave._thenRunCallbacks(ai)}};h.Object=function(ah,ai){if(ag.isString(ah)){return h.Object._create.apply(this,arguments)}ah=ah||{};if(ai&&ai.parse){ah=this.parse(ah)}var aj=h._getValue(this,"defaults");if(aj){ah=ag.extend({},aj,ah)}if(ai&&ai.collection){this.collection=ai.collection}this._serverData={};this._opSetQueue=[{}];this.attributes={};this._hashedJSON={};this._escapedAttributes={};this.cid=ag.uniqueId("c");this.changed={};this._silent={};this._pending={};if(!this.set(ah,{silent:true})){throw new Error("Can't create an invalid Parse.Object")}this.changed={};this._silent={};this._pending={};this._hasData=true;this._previousAttributes=ag.clone(this.attributes);this.initialize.apply(this,arguments)};h.Object.saveAll=function(ai,ah){return h.Object._deepSaveAsync(ai)._thenRunCallbacks(ah)};ag.extend(h.Object.prototype,h.Events,{_existed:false,initialize:function(){},toJSON:function(){var ah=this._toFullJSON();h._arrayEach(["__type","className"],function(ai){delete ah[ai]});return ah},_toFullJSON:function(ai){var ah=ag.clone(this.attributes);h._objectEach(ah,function(ak,aj){ah[aj]=h._encode(ak,ai)});h._objectEach(this._operations,function(ak,aj){ah[aj]=ak});if(ag.has(this,"id")){ah.objectId=this.id}if(ag.has(this,"createdAt")){if(ag.isDate(this.createdAt)){ah.createdAt=this.createdAt.toJSON()}else{ah.createdAt=this.createdAt}}if(ag.has(this,"updatedAt")){if(ag.isDate(this.updatedAt)){ah.updatedAt=this.updatedAt.toJSON()}else{ah.updatedAt=this.updatedAt}}ah.__type="Object";ah.className=this.className;return ah},_refreshCache:function(){var ah=this;if(ah._refreshingCache){return}ah._refreshingCache=true;h._objectEach(this.attributes,function(aj,ai){if(aj instanceof h.Object){aj._refreshCache()}else{if(ag.isObject(aj)){if(ah._resetCacheForKey(ai)){ah.set(ai,new h.Op.Set(aj),{silent:true})}}}});delete ah._refreshingCache},dirty:function(ah){this._refreshCache();var ai=ag.last(this._opSetQueue);if(ah){return(ai[ah]?true:false)}if(!this.id){return true}if(ag.keys(ai).length>0){return true}return false},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(ah){return this.attributes[ah]},relation:function(ah){var ai=this.get(ah);if(ai){if(!(ai instanceof h.Relation)){throw"Called relation() on non-relation field "+ah}ai._ensureParentAndKey(this,ah);return ai}else{return new h.Relation(this,ah)}},escape:function(ah){var ai=this._escapedAttributes[ah];if(ai){return ai}var ak=this.attributes[ah];var aj;if(h._isNullOrUndefined(ak)){aj=""}else{aj=ag.escape(ak.toString())}this._escapedAttributes[ah]=aj;return aj},has:function(ah){return !h._isNullOrUndefined(this.attributes[ah])},_mergeMagicFields:function(ai){var ah=this;var aj=["id","objectId","createdAt","updatedAt"];h._arrayEach(aj,function(ak){if(ai[ak]){if(ak==="objectId"){ah.id=ai[ak]}else{if((ak==="createdAt"||ak==="updatedAt")&&!ag.isDate(ai[ak])){ah[ak]=h._parseDate(ai[ak])}else{ah[ak]=ai[ak]}}delete ai[ak]}})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var ai=this;var ah=ag.first(this._opSetQueue);this._opSetQueue=ag.rest(this._opSetQueue);var aj=ag.first(this._opSetQueue);h._objectEach(ah,function(an,al){var am=ah[al];var ak=aj[al];if(am&&ak){aj[al]=ak._mergeWithPrevious(am)}else{if(am){aj[al]=am}}});this._saving=this._saving-1},_finishSave:function(aj){var ah={};h._traverse(this.attributes,function(al){if(al instanceof h.Object&&al.id&&al._hasData){ah[al.id]=al}});var ak=ag.first(this._opSetQueue);this._opSetQueue=ag.rest(this._opSetQueue);this._applyOpSet(ak,this._serverData);this._mergeMagicFields(aj);var ai=this;h._objectEach(aj,function(am,al){ai._serverData[al]=h._decode(al,am);var an=h._traverse(ai._serverData[al],function(ao){if(ao instanceof h.Object&&ah[ao.id]){return ah[ao.id]}});if(an){ai._serverData[al]=an}});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(aj,ai){this._opSetQueue=[{}];this._mergeMagicFields(aj);var ah=this;h._objectEach(aj,function(al,ak){ah._serverData[ak]=h._decode(ak,al)});this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._hasData=ai},_applyOpSet:function(ai,aj){var ah=this;h._objectEach(ai,function(al,ak){aj[ak]=al._estimate(aj[ak],ah,ak);if(aj[ak]===h.Op._UNSET){delete aj[ak]}})},_resetCacheForKey:function(ai){var aj=this.attributes[ai];if(ag.isObject(aj)&&!(aj instanceof h.Object)&&!(aj instanceof h.File)){aj=aj.toJSON?aj.toJSON():aj;var ah=JSON.stringify(aj);if(this._hashedJSON[ai]!==ah){this._hashedJSON[ai]=ah;return true}}return false},_rebuildEstimatedDataForKey:function(ai){var ah=this;delete this.attributes[ai];if(this._serverData[ai]){this.attributes[ai]=this._serverData[ai]}h._arrayEach(this._opSetQueue,function(aj){var ak=aj[ai];if(ak){ah.attributes[ai]=ak._estimate(ah.attributes[ai],ah,ai);if(ah.attributes[ai]===h.Op._UNSET){delete ah.attributes[ai]}else{ah._resetCacheForKey(ai)}}})},_rebuildAllEstimatedData:function(){var ah=this;var ai=ag.clone(this.attributes);this.attributes=ag.clone(this._serverData);h._arrayEach(this._opSetQueue,function(aj){ah._applyOpSet(aj,ah.attributes);h._objectEach(aj,function(al,ak){ah._resetCacheForKey(ak)})});h._objectEach(ai,function(aj,ak){if(ah.attributes[ak]!==aj){ah.trigger("change:"+ak,ah,ah.attributes[ak],{})}});h._objectEach(this.attributes,function(ak,aj){if(!ag.has(ai,aj)){ah.trigger("change:"+aj,ah,ak,{})}})},set:function(am,al,ap){var an,ak;if(ag.isObject(am)||h._isNullOrUndefined(am)){an=am;h._objectEach(an,function(ar,aq){an[aq]=h._decode(aq,ar)});ap=al}else{an={};an[am]=h._decode(am,al)}ap=ap||{};if(!an){return this}if(an instanceof h.Object){an=an.attributes}if(ap.unset){h._objectEach(an,function(aq,ar){an[ar]=new h.Op.Unset()})}var aj=ag.clone(an);var ao=this;h._objectEach(aj,function(ar,aq){if(ar instanceof h.Op){aj[aq]=ar._estimate(ao.attributes[aq],ao,aq);if(aj[aq]===h.Op._UNSET){delete aj[aq]}}});if(!this._validate(an,ap)){return false}this._mergeMagicFields(an);ap.changes={};var ah=this._escapedAttributes;var ai=this._previousAttributes||{};h._arrayEach(ag.keys(an),function(ar){var au=an[ar];if(au instanceof h.Relation){au.parent=ao}if(!(au instanceof h.Op)){au=new h.Op.Set(au)}var aq=true;if(au instanceof h.Op.Set&&ag.isEqual(ao.attributes[ar],au.value)){aq=false}if(aq){delete ah[ar];if(ap.silent){ao._silent[ar]=true}else{ap.changes[ar]=true}}var at=ag.last(ao._opSetQueue);at[ar]=au._mergeWithPrevious(at[ar]);ao._rebuildEstimatedDataForKey(ar);if(aq){ao.changed[ar]=ao.attributes[ar];if(!ap.silent){ao._pending[ar]=true}}else{delete ao.changed[ar];delete ao._pending[ar]}});if(!ap.silent){this.change(ap)}return this},unset:function(ah,ai){ai=ai||{};ai.unset=true;return this.set(ah,null,ai)},increment:function(ah,ai){if(ag.isUndefined(ai)||ag.isNull(ai)){ai=1}return this.set(ah,new h.Op.Increment(ai))},add:function(ah,ai){return this.set(ah,new h.Op.Add([ai]))},addUnique:function(ah,ai){return this.set(ah,new h.Op.AddUnique([ai]))},remove:function(ah,ai){return this.set(ah,new h.Op.Remove([ai]))},op:function(ah){return ag.last(this._opSetQueue)[ah]},clear:function(ah){ah=ah||{};ah.unset=true;var ai=ag.extend(this.attributes,this._operations);return this.set(ai,ah)},_getSaveJSON:function(){var ah=ag.clone(ag.first(this._opSetQueue));h._objectEach(ah,function(aj,ai){ah[ai]=aj.toJSON()});return ah},_canBeSerialized:function(){return h.Object._canBeSerializedAsValue(this.attributes)},fetch:function(ai){var ah=this;var aj=h._request("classes",this.className,this.id,"GET");return aj.then(function(al,ak,am){ah._finishFetch(ah.parse(al,ak,am),true);return ah})._thenRunCallbacks(ai,this)},save:function(an,am,ak){var aj,at,ao,aw,ar;if(ag.isObject(an)||h._isNullOrUndefined(an)){at=an;aw=am}else{at={};at[an]=am;aw=ak}if(!aw&&at){var au=ag.reject(at,function(ay,ax){return ag.include(["success","error","wait"],ax)});if(au.length===0){var av=true;if(ag.has(at,"success")&&!ag.isFunction(at.success)){av=false}if(ag.has(at,"error")&&!ag.isFunction(at.error)){av=false}if(av){return this.save(null,at)}}}aw=ag.clone(aw)||{};if(aw.wait){ao=ag.clone(this.attributes)}var ap=ag.clone(aw)||{};if(ap.wait){ap.silent=true}var ai;ap.error=function(ay,ax){ai=ax};if(at&&!this.set(at,ap)){return h.Promise.error(ai)._thenRunCallbacks(aw,this)}var al=this;al._refreshCache();var aq=[];var ah=[];h.Object._findUnsavedChildren(al.attributes,aq,ah);if(aq.length+ah.length>0){return h.Object._deepSaveAsync(this.attributes).then(function(){return al.save(null,aw)},function(ax){return h.Promise.error(ax)._thenRunCallbacks(aw,al)})}this._startSave();this._saving=(this._saving||0)+1;this._allPreviousSaves=this._allPreviousSaves||h.Promise.as();this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var aB=al.id?"PUT":"POST";var ay=al._getSaveJSON();var ax="classes";var az=al.className;if(al.className==="_User"&&!al.id){ax="users";az=null}var aA=h._request(ax,az,al.id,aB,ay);aA=aA.then(function(aF,aC,aE){var aD=al.parse(aF,aC,aE);if(aw.wait){aD=ag.extend(at||{},aD)}al._finishSave(aD);if(aw.wait){al.set(ao,ap)}return al},function(aC){al._cancelSave();return h.Promise.error(aC)})._thenRunCallbacks(aw,al);return aA});return this._allPreviousSaves},destroy:function(ai){ai=ai||{};var ah=this;var ak=function(){ah.trigger("destroy",ah,ah.collection,ai)};if(!this.id){return ak()}if(!ai.wait){ak()}var aj=h._request("classes",this.className,this.id,"DELETE");return aj.then(function(){if(ai.wait){ak()}return ah})._thenRunCallbacks(ai,this)},parse:function(ak,ah,aj){var ai=ag.clone(ak);ag(["createdAt","updatedAt"]).each(function(al){if(ai[al]){ai[al]=h._parseDate(ai[al])}});if(!ai.updatedAt){ai.updatedAt=ai.createdAt}if(ah){this._existed=(ah!==201)}return ai},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(aj){aj=aj||{};var al=this._changing;this._changing=true;var ai=this;h._objectEach(this._silent,function(am){ai._pending[am]=true});var ak=ag.extend({},aj.changes,this._silent);this._silent={};h._objectEach(ak,function(an,am){ai.trigger("change:"+am,ai,ai.get(am),aj)});if(al){return this}var ah=function(an,am){if(!ai._pending[am]&&!ai._silent[am]){delete ai.changed[am]}};while(!ag.isEmpty(this._pending)){this._pending={};this.trigger("change",this,aj);h._objectEach(this.changed,ah);ai._previousAttributes=ag.clone(this.attributes)}this._changing=false;return this},existed:function(){return this._existed},hasChanged:function(ah){if(!arguments.length){return !ag.isEmpty(this.changed)}return this.changed&&ag.has(this.changed,ah)},changedAttributes:function(ai){if(!ai){return this.hasChanged()?ag.clone(this.changed):false}var aj={};var ah=this._previousAttributes;h._objectEach(ai,function(al,ak){if(!ag.isEqual(ah[ak],al)){aj[ak]=al}});return aj},previous:function(ah){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[ah]},previousAttributes:function(){return ag.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(ai,ah){if(ag.has(ai,"ACL")&&!(ai.ACL instanceof h.ACL)){return new h.Error(h.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}return false},_validate:function(aj,ai){if(ai.silent||!this.validate){return true}aj=ag.extend({},this.attributes,aj);var ah=this.validate(aj,ai);if(!ah){return true}if(ai&&ai.error){ai.error(this,ah,ai)}else{this.trigger("error",this,ah,ai)}return false},getACL:function(){return this.get("ACL")},setACL:function(ai,ah){return this.set("ACL",ai,ah)}});h.Object._getSubclass=function(ai){if(!ag.isString(ai)){throw"Parse.Object._getSubclass requires a string argument."}var ah=h.Object._classMap[ai];if(!ah){ah=h.Object.extend(ai);h.Object._classMap[ai]=ah}return ah};h.Object._create=function(ak,ah,ai){var aj=h.Object._getSubclass(ak);return new aj(ah,ai)};h.Object._classMap={};h.Object._extend=h._extend;h.Object.extend=function(ak,aj,al){if(!ag.isString(ak)){if(ak&&ag.has(ak,"className")){return h.Object.extend(ak.className,ak,aj)}else{throw new Error("Parse.Object.extend's first argument should be the className.")}}if(ak==="User"){ak="_User"}var ah=null;if(ag.has(h.Object._classMap,ak)){var ai=h.Object._classMap[ak];ah=ai._extend(aj,al)}else{aj=aj||{};aj.className=ak;ah=this._extend(aj,al)}ah.extend=function(an){if(ag.isString(an)||(an&&ag.has(an,"className"))){return h.Object.extend.apply(ah,arguments)}var am=[ak].concat(h._.toArray(arguments));return h.Object.extend.apply(ah,am)};h.Object._classMap[ak]=ah;return ah};h.Object._findUnsavedChildren=function(ah,ai,aj){h._traverse(ah,function(ak){if(ak instanceof h.Object){ak._refreshCache();if(ak.dirty()){ai.push(ak)}return}if(ak instanceof h.File){if(!ak.url()){aj.push(ak)}return}})};h.Object._canBeSerializedAsValue=function(ah){var ai=true;if(ah instanceof h.Object){ai=!!ah.id}else{if(ag.isArray(ah)){h._arrayEach(ah,function(aj){if(!h.Object._canBeSerializedAsValue(aj)){ai=false}})}else{if(ag.isObject(ah)){h._objectEach(ah,function(aj){if(!h.Object._canBeSerializedAsValue(aj)){ai=false}})}}}return ai};h.Object._deepSaveAsync=function(ai){var ah=[];var al=[];h.Object._findUnsavedChildren(ai,ah,al);var am=h.Promise.as();ag.each(al,function(an){am=am.then(function(){return an.save()})});var ak=ag.uniq(ah);var aj=ag.uniq(ak);return am.then(function(){return h.Promise._continueWhile(function(){return aj.length>0},function(){var aq=[];var an=[];h._arrayEach(aj,function(ar){if(aq.length>20){an.push(ar);return}if(ar._canBeSerialized()){aq.push(ar)}else{an.push(ar)}});aj=an;if(aq.length===0){return h.Promise.error(new h.Error(h.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var ao=h.Promise.when(ag.map(aq,function(ar){return ar._allPreviousSaves||h.Promise.as()}));var ap=new h.Promise();h._arrayEach(aq,function(ar){ar._allPreviousSaves=ap});return ao._continueWith(function(){return h._request("batch",null,null,"POST",{requests:ag.map(aq,function(ar){var at=ar._getSaveJSON();var av="POST";var au="/1/classes/"+ar.className;if(ar.id){au=au+"/"+ar.id;av="PUT"}ar._startSave();return{method:av,path:au,body:at}})}).then(function(at,ar,av){var au;h._arrayEach(aq,function(aw,ax){if(at[ax].success){aw._finishSave(aw.parse(at[ax].success,ar,av))}else{au=au||at[ax].error;aw._cancelSave()}});if(au){return h.Promise.error(new h.Error(au.code,au.error))}}).then(function(ar){ap.resolve(ar);return ar},function(ar){ap.reject(ar);return h.Promise.error(ar)})})})}).then(function(){return ai})};h.Role=h.Object.extend("_Role",{constructor:function(ah,ai){if(ag.isString(ah)&&(ai instanceof h.ACL)){h.Object.prototype.constructor.call(this,null,null);this.setName(ah);this.setACL(ai)}else{h.Object.prototype.constructor.call(this,ah,ai)}},getName:function(){return this.get("name")},setName:function(ai,ah){return this.set("name",ai,ah)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(aj,ai){if("name" in aj&&aj.name!==this.getName()){var ah=aj.name;if(this.id&&this.id!==aj.objectId){return new h.Error(h.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!ag.isString(ah)){return new h.Error(h.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!(/^[0-9a-zA-Z\-_ ]+$/).test(ah)){return new h.Error(h.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}if(h.Object.prototype.validate){return h.Object.prototype.validate.call(this,aj,ai)}return false}});h.Collection=function(ai,ah){ah=ah||{};if(ah.comparator){this.comparator=ah.comparator}if(ah.model){this.model=ah.model}if(ah.query){this.query=ah.query}this._reset();this.initialize.apply(this,arguments);if(ai){this.reset(ai,{silent:true,parse:ah.parse})}};ag.extend(h.Collection.prototype,h.Events,{model:h.Object,initialize:function(){},toJSON:function(){return this.map(function(ah){return ah.toJSON()})},add:function(ai,aq){var am,ao,ak,an,ap,aj,al={},ah={};aq=aq||{};ai=ag.isArray(ai)?ai.slice():[ai];for(am=0,ak=ai.length;am<ak;am++){ai[am]=this._prepareModel(ai[am],aq);an=ai[am];if(!an){throw new Error("Can't add an invalid model to a collection")}ap=an.cid;if(al[ap]||this._byCid[ap]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}aj=an.id;if(!h._isNullOrUndefined(aj)&&(ah[aj]||this._byId[aj])){throw new Error("Duplicate id: can't add the same model to a collection twice")}ah[aj]=an;al[ap]=an}for(am=0;am<ak;am++){(an=ai[am]).on("all",this._onModelEvent,this);this._byCid[an.cid]=an;if(an.id){this._byId[an.id]=an}}this.length+=ak;ao=h._isNullOrUndefined(aq.at)?this.models.length:aq.at;this.models.splice.apply(this.models,[ao,0].concat(ai));if(this.comparator){this.sort({silent:true})}if(aq.silent){return this}for(am=0,ak=this.models.length;am<ak;am++){an=this.models[am];if(al[an.cid]){aq.index=am;an.trigger("add",an,this,aq)}}return this},remove:function(am,ak){var al,ah,aj,ai;ak=ak||{};am=ag.isArray(am)?am.slice():[am];for(al=0,ah=am.length;al<ah;al++){ai=this.getByCid(am[al])||this.get(am[al]);if(!ai){continue}delete this._byId[ai.id];delete this._byCid[ai.cid];aj=this.indexOf(ai);this.models.splice(aj,1);this.length--;if(!ak.silent){ak.index=aj;ai.trigger("remove",ai,this,ak)}this._removeReference(ai)}return this},get:function(ah){return ah&&this._byId[ah.id||ah]},getByCid:function(ah){return ah&&this._byCid[ah.cid||ah]},at:function(ah){return this.models[ah]},sort:function(ai){ai=ai||{};if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var ah=ag.bind(this.comparator,this);if(this.comparator.length===1){this.models=this.sortBy(ah)}else{this.models.sort(ah)}if(!ai.silent){this.trigger("reset",this,ai)}return this},pluck:function(ah){return ag.map(this.models,function(ai){return ai.get(ah)})},reset:function(aj,ai){var ah=this;aj=aj||[];ai=ai||{};h._arrayEach(this.models,function(ak){ah._removeReference(ak)});this._reset();this.add(aj,{silent:true,parse:ai.parse});if(!ai.silent){this.trigger("reset",this,ai)}return this},fetch:function(ah){ah=ag.clone(ah)||{};if(ah.parse===undefined){ah.parse=true}var aj=this;var ai=this.query||new h.Query(this.model);return ai.find().then(function(ak){if(ah.add){aj.add(ak,ah)}else{aj.reset(ak,ah)}return aj})._thenRunCallbacks(ah,this)},create:function(ai,ah){var aj=this;ah=ah?ag.clone(ah):{};ai=this._prepareModel(ai,ah);if(!ai){return false}if(!ah.wait){aj.add(ai,ah)}var ak=ah.success;ah.success=function(al,an,am){if(ah.wait){aj.add(al,ah)}if(ak){ak(al,an)}else{al.trigger("sync",ai,an,ah)}};ai.save(null,ah);return ai},parse:function(ai,ah){return ai},chain:function(){return ag(this.models).chain()},_reset:function(ah){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(aj,ai){if(!(aj instanceof h.Object)){var ah=aj;ai.collection=this;aj=new this.model(ah,ai);if(!aj._validate(aj.attributes,ai)){aj=false}}else{if(!aj.collection){aj.collection=this}}return aj},_removeReference:function(ah){if(this===ah.collection){delete ah.collection}ah.off("all",this._onModelEvent,this)},_onModelEvent:function(aj,ai,ak,ah){if((aj==="add"||aj==="remove")&&ak!==this){return}if(aj==="destroy"){this.remove(ai,ah)}if(ai&&aj==="change:objectId"){delete this._byId[ai.previous("objectId")];this._byId[ai.id]=ai}this.trigger.apply(this,arguments)}});var R=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];h._arrayEach(R,function(ah){h.Collection.prototype[ah]=function(){return ag[ah].apply(ag,[this.models].concat(ag.toArray(arguments)))}});h.Collection.extend=h._extend;h.View=function(ah){this.cid=ag.uniqueId("view");this._configure(ah||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var L=/^(\S+)\s*(.*)$/;var d=["model","collection","el","id","attributes","className","tagName"];ag.extend(h.View.prototype,h.Events,{tagName:"div",$:function(ah){return this.$el.find(ah)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(ai,ah,ak){var aj=document.createElement(ai);if(ah){h.$(aj).attr(ah)}if(ak){h.$(aj).html(ak)}return aj},setElement:function(ah,ai){this.$el=h.$(ah);this.el=this.$el[0];if(ai!==false){this.delegateEvents()}return this},delegateEvents:function(ai){ai=ai||h._getValue(this,"events");if(!ai){return}this.undelegateEvents();var ah=this;h._objectEach(ai,function(an,am){if(!ag.isFunction(an)){an=ah[ai[am]]}if(!an){throw new Error('Event "'+ai[am]+'" does not exist')}var al=am.match(L);var ak=al[1],aj=al[2];an=ag.bind(an,ah);ak+=".delegateEvents"+ah.cid;if(aj===""){ah.$el.bind(ak,an)}else{ah.$el.delegate(aj,ak,an)}})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(ai){if(this.options){ai=ag.extend({},this.options,ai)}var ah=this;ag.each(d,function(aj){if(ai[aj]){ah[aj]=ai[aj]}});this.options=ai},_ensureElement:function(){if(!this.el){var ah=h._getValue(this,"attributes")||{};if(this.id){ah.id=this.id}if(this.className){ah["class"]=this.className}this.setElement(this.make(this.tagName,ah),false)}else{this.setElement(this.el,false)}}});h.View.extend=h._extend;h.User=h.Object.extend("_User",{_isCurrentUser:false,_mergeMagicFields:function(ah){if(ah.sessionToken){this._sessionToken=ah.sessionToken;delete ah.sessionToken}h.User.__super__._mergeMagicFields.call(this,ah)},_cleanupAuthData:function(){if(!this.isCurrent()){return}var ah=this.get("authData");if(!ah){return}h._objectEach(this.get("authData"),function(aj,ai){if(!ah[ai]){delete ah[ai]}})},_synchronizeAllAuthData:function(){var ai=this.get("authData");if(!ai){return}var ah=this;h._objectEach(this.get("authData"),function(ak,aj){ah._synchronizeAuthData(aj)})},_synchronizeAuthData:function(ak){if(!this.isCurrent()){return}var ah;if(ag.isString(ak)){ah=ak;ak=h.User._authProviders[ah]}else{ah=ak.getAuthType()}var ai=this.get("authData");if(!ai||!ak){return}var aj=ak.restoreAuthentication(ai[ah]);if(!aj){this._unlinkFrom(ak)}},_handleSaveResult:function(ah){if(ah){this._isCurrentUser=true}this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();if(ah||this.isCurrent()){h.User._saveCurrentUser(this)}},_linkWith:function(an,aj){var ai;if(ag.isString(an)){ai=an;an=h.User._authProviders[an]}else{ai=an.getAuthType()}if(ag.has(aj,"authData")){var ak=this.get("authData")||{};ak[ai]=aj.authData;this.set("authData",ak);var am=ag.clone(aj)||{};am.success=function(ao){ao._handleSaveResult(true);if(aj.success){aj.success.apply(this,arguments)}};return this.save({authData:ak},am)}else{var ah=this;var al=new h.Promise();an.authenticate({success:function(ap,ao){ah._linkWith(ap,{authData:ao,success:aj.success,error:aj.error}).then(function(){al.resolve(ah)})},error:function(ap,ao){if(aj.error){aj.error(ah,ao)}al.reject(ao)}});return al}},_unlinkFrom:function(al,aj){var ai;if(ag.isString(al)){ai=al;al=h.User._authProviders[al]}else{ai=al.getAuthType()}var ak=ag.clone(aj);var ah=this;ak.authData=null;ak.success=function(am){ah._synchronizeAuthData(al);if(aj.success){aj.success.apply(this,arguments)}};return this._linkWith(al,ak)},_isLinked:function(aj){var ah;if(ag.isString(aj)){ah=aj}else{ah=aj.getAuthType()}var ai=this.get("authData")||{};return !!ai[ah]},_logOutWithAll:function(){var ai=this.get("authData");if(!ai){return}var ah=this;h._objectEach(this.get("authData"),function(ak,aj){ah._logOutWith(aj)})},_logOutWith:function(ah){if(!this.isCurrent()){return}if(ag.isString(ah)){ah=h.User._authProviders[ah]}if(ah&&ah.deauthenticate){ah.deauthenticate()}},signUp:function(ak,aj){var ai;aj=aj||{};var am=(ak&&ak.username)||this.get("username");if(!am||(am==="")){ai=new h.Error(h.Error.OTHER_CAUSE,"Cannot sign up user with an empty name.");if(aj&&aj.error){aj.error(this,ai)}return h.Promise.error(ai)}var ah=(ak&&ak.password)||this.get("password");if(!ah||(ah==="")){ai=new h.Error(h.Error.OTHER_CAUSE,"Cannot sign up user with an empty password.");if(aj&&aj.error){aj.error(this,ai)}return h.Promise.error(ai)}var al=ag.clone(aj);al.success=function(an){an._handleSaveResult(true);if(aj.success){aj.success.apply(this,arguments)}};return this.save(ak,al)},logIn:function(ai){var ah=this;var aj=h._request("login",null,null,"GET",this.toJSON());return aj.then(function(an,ak,am){var al=ah.parse(an,ak,am);ah._finishFetch(al);ah._handleSaveResult(true);return ah})._thenRunCallbacks(ai,this)},save:function(al,ak,aj){var ai,ao,am,ap,an;if(ag.isObject(al)||ag.isNull(al)||ag.isUndefined(al)){ao=al;ap=ak}else{ao={};ao[al]=ak;ap=aj}ap=ap||{};var ah=ag.clone(ap);ah.success=function(aq){aq._handleSaveResult(false);if(ap.success){ap.success.apply(this,arguments)}};return h.Object.prototype.save.call(this,ao,ah)},fetch:function(ah){var ai=ah?ag.clone(ah):{};ai.success=function(aj){aj._handleSaveResult(false);if(ah&&ah.success){ah.success.apply(this,arguments)}};return h.Object.prototype.fetch.call(this,ai)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(ai,ah){return this.set("username",ai,ah)},setPassword:function(ai,ah){return this.set("password",ai,ah)},getEmail:function(){return this.get("email")},setEmail:function(ai,ah){return this.set("email",ai,ah)},authenticated:function(){return !!this._sessionToken&&(h.User.current()&&h.User.current().id===this.id)}},{_currentUser:null,_currentUserMatchesDisk:false,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(al,ak,aj,ai){aj=aj||{};aj.username=al;aj.password=ak;var ah=h.Object._create("_User");return ah.signUp(aj,ai)},logIn:function(ak,aj,ai){var ah=h.Object._create("_User");ah._finishFetch({username:ak,password:aj});return ah.logIn(ai)},logOut:function(){if(h.User._currentUser!==null){h.User._currentUser._logOutWithAll();h.User._currentUser._isCurrentUser=false}h.User._currentUserMatchesDisk=true;h.User._currentUser=null;h.localStorage.removeItem(h._getParsePath(h.User._CURRENT_USER_KEY))},requestPasswordReset:function(ai,ah){var aj={email:ai};var ak=h._request("requestPasswordReset",null,null,"POST",aj);return ak._thenRunCallbacks(ah)},current:function(){if(h.User._currentUser){return h.User._currentUser}if(h.User._currentUserMatchesDisk){return h.User._currentUser}h.User._currentUserMatchesDisk=true;var ah=h.localStorage.getItem(h._getParsePath(h.User._CURRENT_USER_KEY));if(!ah){return null}h.User._currentUser=h.Object._create("_User");h.User._currentUser._isCurrentUser=true;var ai=JSON.parse(ah);h.User._currentUser.id=ai._id;delete ai._id;h.User._currentUser._sessionToken=ai._sessionToken;delete ai._sessionToken;h.User._currentUser.set(ai);h.User._currentUser._synchronizeAllAuthData();h.User._currentUser._refreshCache();h.User._currentUser._opSetQueue=[{}];return h.User._currentUser},_saveCurrentUser:function(ah){if(h.User._currentUser!==ah){h.User.logOut()}ah._isCurrentUser=true;h.User._currentUser=ah;h.User._currentUserMatchesDisk=true;var ai=ah.toJSON();ai._id=ah.id;ai._sessionToken=ah._sessionToken;h.localStorage.setItem(h._getParsePath(h.User._CURRENT_USER_KEY),JSON.stringify(ai))},_registerAuthenticationProvider:function(ah){h.User._authProviders[ah.getAuthType()]=ah;if(h.User.current()){h.User.current()._synchronizeAuthData(ah.getAuthType())}},_logInWith:function(aj,ai){var ah=h.Object._create("_User");return ah._linkWith(aj,ai)}});h.Query=function(ah){if(ag.isString(ah)){ah=h.Object._getSubclass(ah)}this.objectClass=ah;this.className=ah.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};h.Query.or=function(){var ah=ag.toArray(arguments);var ai=null;h._arrayEach(ah,function(ak){if(ag.isNull(ai)){ai=ak.className}if(ai!==ak.className){throw"All queries must be for the same class"}});var aj=new h.Query(ai);aj._orQuery(ah);return aj};h.Query.prototype={get:function(ah,aj){var ai=this;ai.equalTo("objectId",ah);return ai.first().then(function(ak){if(ak){return ak}var al=new h.Error(h.Error.OBJECT_NOT_FOUND,"Object not found.");return h.Promise.error(al)})._thenRunCallbacks(aj,null)},toJSON:function(){var ah={where:this._where};if(this._include.length>0){ah.include=this._include.join(",")}if(this._select){ah.keys=this._select.join(",")}if(this._limit>=0){ah.limit=this._limit}if(this._skip>0){ah.skip=this._skip}if(this._order!==undefined){ah.order=this._order}h._objectEach(this._extraOptions,function(aj,ai){ah[ai]=aj});return ah},find:function(ai){var ah=this;var aj=h._request("classes",this.className,null,"GET",this.toJSON());return aj.then(function(ak){return ag.map(ak.results,function(al){var am;if(ak.className){am=new h.Object(ak.className)}else{am=new ah.objectClass()}am._finishFetch(al,true);return am})})._thenRunCallbacks(ai)},count:function(ah){var aj=this.toJSON();aj.limit=0;aj.count=1;var ai=h._request("classes",this.className,null,"GET",aj);return ai.then(function(ak){return ak.count})._thenRunCallbacks(ah)},first:function(ai){var ah=this;var ak=this.toJSON();ak.limit=1;var aj=h._request("classes",this.className,null,"GET",ak);return aj.then(function(al){return ag.map(al.results,function(am){var an=new ah.objectClass();an._finishFetch(am,true);return an})[0]})._thenRunCallbacks(ai)},collection:function(ah,ai){ai=ai||{};return new h.Collection(ah,ag.extend(ai,{model:this.objectClass,query:this}))},skip:function(ah){this._skip=ah;return this},limit:function(ah){this._limit=ah;return this},equalTo:function(ah,ai){this._where[ah]=h._encode(ai);return this},_addCondition:function(ah,aj,ai){if(!this._where[ah]){this._where[ah]={}}this._where[ah][aj]=h._encode(ai);return this},notEqualTo:function(ah,ai){this._addCondition(ah,"$ne",ai);return this},lessThan:function(ah,ai){this._addCondition(ah,"$lt",ai);return this},greaterThan:function(ah,ai){this._addCondition(ah,"$gt",ai);return this},lessThanOrEqualTo:function(ah,ai){this._addCondition(ah,"$lte",ai);return this},greaterThanOrEqualTo:function(ah,ai){this._addCondition(ah,"$gte",ai);return this},containedIn:function(ai,ah){this._addCondition(ai,"$in",ah);return this},notContainedIn:function(ai,ah){this._addCondition(ai,"$nin",ah);return this},containsAll:function(ai,ah){this._addCondition(ai,"$all",ah);return this},exists:function(ah){this._addCondition(ah,"$exists",true);return this},doesNotExist:function(ah){this._addCondition(ah,"$exists",false);return this},matches:function(ai,aj,ah){this._addCondition(ai,"$regex",aj);if(!ah){ah=""}if(aj.ignoreCase){ah+="i"}if(aj.multiline){ah+="m"}if(ah&&ah.length){this._addCondition(ai,"$options",ah)}return this},matchesQuery:function(ah,aj){var ai=aj.toJSON();ai.className=aj.className;this._addCondition(ah,"$inQuery",ai);return this},doesNotMatchQuery:function(ah,aj){var ai=aj.toJSON();ai.className=aj.className;this._addCondition(ah,"$notInQuery",ai);return this},matchesKeyInQuery:function(ai,ah,ak){var aj=ak.toJSON();aj.className=ak.className;this._addCondition(ai,"$select",{key:ah,query:aj});return this},doesNotMatchKeyInQuery:function(ai,ah,ak){var aj=ak.toJSON();aj.className=ak.className;this._addCondition(ai,"$dontSelect",{key:ah,query:aj});return this},_orQuery:function(ah){var ai=ag.map(ah,function(aj){return aj.toJSON().where});this._where.$or=ai;return this},_quote:function(ah){return"\\Q"+ah.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(ah,ai){this._addCondition(ah,"$regex",this._quote(ai));return this},startsWith:function(ah,ai){this._addCondition(ah,"$regex","^"+this._quote(ai));return this},endsWith:function(ah,ai){this._addCondition(ah,"$regex",this._quote(ai)+"$");return this},ascending:function(ah){this._order=ah;return this},descending:function(ah){this._order="-"+ah;return this},near:function(ai,ah){if(!(ah instanceof h.GeoPoint)){ah=new h.GeoPoint(ah)}this._addCondition(ai,"$nearSphere",ah);return this},withinRadians:function(ai,ah,aj){this.near(ai,ah);this._addCondition(ai,"$maxDistance",aj);return this},withinMiles:function(ai,ah,aj){return this.withinRadians(ai,ah,aj/3958.8)},withinKilometers:function(ai,ah,aj){return this.withinRadians(ai,ah,aj/6371)},withinGeoBox:function(ah,aj,ai){if(!(aj instanceof h.GeoPoint)){aj=new h.GeoPoint(aj)}if(!(ai instanceof h.GeoPoint)){ai=new h.GeoPoint(ai)}this._addCondition(ah,"$within",{"$box":[aj,ai]});return this},include:function(){var ah=this;h._arrayEach(arguments,function(ai){if(ag.isArray(ai)){ah._include=ah._include.concat(ai)}else{ah._include.push(ai)}});return this},select:function(){var ah=this;this._select=this._select||[];h._arrayEach(arguments,function(ai){if(ag.isArray(ai)){ah._select=ah._select.concat(ai)}else{ah._select.push(ai)}});return this},each:function(am,ai){ai=ai||{};if(this._order||this._skip||(this._limit>=0)){var ah="Cannot iterate on a query with sort, skip, or limit.";return h.Promise.error(ah)._thenRunCallbacks(ai)}var ak=new h.Promise();var aj=new h.Query(this.objectClass);aj._limit=ai.batchSize||100;aj._where=ag.clone(this._where);aj._include=ag.clone(this._include);aj.ascending("objectId");var al=false;return h.Promise._continueWhile(function(){return !al},function(){return aj.find().then(function(an){var ao=h.Promise.as();h._.each(an,function(ap){ao=ao.then(function(){return am(ap)})});return ao.then(function(){if(an.length>=aj._limit){aj.greaterThan("objectId",an[an.length-1].id)}else{al=true}})})})._thenRunCallbacks(ai)}};var B="*";var p=false;var t;var ac;var E={authenticate:function(ai){var ah=this;FB.login(function(aj){if(aj.authResponse){if(ai.success){ai.success(ah,{id:aj.authResponse.userID,access_token:aj.authResponse.accessToken,expiration_date:new Date(aj.authResponse.expiresIn*1000+(new Date()).getTime()).toJSON()})}}else{if(ai.error){ai.error(ah,aj)}}},{scope:t})},restoreAuthentication:function(ai){if(ai){var ah={userID:ai.id,accessToken:ai.access_token,expiresIn:(h._parseDate(ai.expiration_date).getTime()-(new Date()).getTime())/1000};var aj=ag.clone(ac);aj.authResponse=ah;aj.status=false;FB.init(aj)}return true},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null);FB.logout()}};h.FacebookUtils={init:function(ah){if(typeof(FB)==="undefined"){throw"The Facebook JavaScript SDK must be loaded before calling init."}ac=ag.clone(ah)||{};if(ac.status&&typeof(console)!=="undefined"){var ai=console.warn||console.log||function(){};ai.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}ac.status=false;FB.init(ac);h.User._registerAuthenticationProvider(E);p=true},isLinked:function(ah){return ah._isLinked("facebook")},logIn:function(ai,ah){if(!ai||ag.isString(ai)){if(!p){throw"You must initialize FacebookUtils before calling logIn."}t=ai;return h.User._logInWith("facebook",ah)}else{var aj=ag.clone(ah)||{};aj.authData=ai;return h.User._logInWith("facebook",aj)}},link:function(ah,aj,ai){if(!aj||ag.isString(aj)){if(!p){throw"You must initialize FacebookUtils before calling link."}t=aj;return ah._linkWith("facebook",ai)}else{var ak=ag.clone(ai)||{};ak.authData=aj;return ah._linkWith("facebook",ak)}},unlink:function(ah,ai){if(!p){throw"You must initialize FacebookUtils before calling unlink."}return ah._unlinkFrom("facebook",ai)}};h.History=function(){this.handlers=[];ag.bindAll(this,"checkUrl")};var S=/^[#\/]/;var ae=/msie [\w.]+/;h.History.started=false;ag.extend(h.History.prototype,h.Events,{interval:50,getHash:function(aj){var ai=aj?aj.location:window.location;var ah=ai.href.match(/#(.*)$/);return ah?ah[1]:""},getFragment:function(ai,ah){if(h._isNullOrUndefined(ai)){if(this._hasPushState||ah){ai=window.location.pathname;var aj=window.location.search;if(aj){ai+=aj}}else{ai=this.getHash()}}if(!ai.indexOf(this.options.root)){ai=ai.substr(this.options.root.length)}return ai.replace(S,"")},start:function(aj){if(h.History.started){throw new Error("Parse.history has already been started")}h.History.started=true;this.options=ag.extend({},{root:"/"},this.options,aj);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var ai=this.getFragment();var ah=document.documentMode;var al=(ae.exec(navigator.userAgent.toLowerCase())&&(!ah||ah<=7));if(al){this.iframe=h.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(ai)}if(this._hasPushState){h.$(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!al){h.$(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)}}}this.fragment=ai;var am=window.location;var ak=am.pathname===this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!ak){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&ak&&am.hash){this.fragment=this.getHash().replace(S,"");window.history.replaceState({},document.title,am.protocol+"//"+am.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){h.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);h.History.started=false},route:function(ah,ai){this.handlers.unshift({route:ah,callback:ai})},checkUrl:function(ai){var ah=this.getFragment();if(ah===this.fragment&&this.iframe){ah=this.getFragment(this.getHash(this.iframe))}if(ah===this.fragment){return false}if(this.iframe){this.navigate(ah)}if(!this.loadUrl()){this.loadUrl(this.getHash())}},loadUrl:function(aj){var ai=this.fragment=this.getFragment(aj);var ah=ag.any(this.handlers,function(ak){if(ak.route.test(ai)){ak.callback(ai);return true}});return ah},navigate:function(aj,ai){if(!h.History.started){return false}if(!ai||ai===true){ai={trigger:ai}}var ak=(aj||"").replace(S,"");if(this.fragment===ak){return}if(this._hasPushState){if(ak.indexOf(this.options.root)!==0){ak=this.options.root+ak}this.fragment=ak;var ah=ai.replace?"replaceState":"pushState";window.history[ah]({},document.title,ak)}else{if(this._wantsHashChange){this.fragment=ak;this._updateHash(window.location,ak,ai.replace);if(this.iframe&&(ak!==this.getFragment(this.getHash(this.iframe)))){if(!ai.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,ak,ai.replace)}}else{window.location.assign(this.options.root+aj)}}if(ai.trigger){this.loadUrl(aj)}},_updateHash:function(ah,ai,aj){if(aj){var ak=ah.toString().replace(/(javascript:|#).*$/,"");ah.replace(ak+"#"+ai)}else{ah.hash=ai}}});h.Router=function(ah){ah=ah||{};if(ah.routes){this.routes=ah.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var H=/:\w+/g;var c=/\*\w+/g;var i=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;ag.extend(h.Router.prototype,h.Events,{initialize:function(){},route:function(ah,ai,aj){h.history=h.history||new h.History();if(!ag.isRegExp(ah)){ah=this._routeToRegExp(ah)}if(!aj){aj=this[ai]}h.history.route(ah,ag.bind(function(al){var ak=this._extractParameters(ah,al);if(aj){aj.apply(this,ak)}this.trigger.apply(this,["route:"+ai].concat(ak));h.history.trigger("route",this,ai,ak)},this));return this},navigate:function(ai,ah){h.history.navigate(ai,ah)},_bindRoutes:function(){if(!this.routes){return}var ai=[];for(var aj in this.routes){if(this.routes.hasOwnProperty(aj)){ai.unshift([aj,this.routes[aj]])}}for(var ak=0,ah=ai.length;ak<ah;ak++){this.route(ai[ak][0],ai[ak][1],this[ai[ak][1]])}},_routeToRegExp:function(ah){ah=ah.replace(i,"\\$&").replace(H,"([^/]+)").replace(c,"(.*?)");return new RegExp("^"+ah+"$")},_extractParameters:function(ah,ai){return ah.exec(ai).slice(1)}});h.Router.extend=h._extend;h.Cloud=h.Cloud||{};ag.extend(h.Cloud,{run:function(ai,ak,ah){var aj=h._request("functions",ai,null,"POST",h._encode(ak,null,true));return aj.then(function(al){return h._decode(null,al).result})._thenRunCallbacks(ah)}});h.Installation=h.Object.extend("_Installation");h.Push=h.Push||{};h.Push.send=function(aj,ah){if(aj.where){aj.where=aj.where.toJSON().where}if(aj.push_time){aj.push_time=aj.push_time.toJSON()}if(aj.expiration_time){aj.expiration_time=aj.expiration_time.toJSON()}if(aj.expiration_time&&aj.expiration_time_interval){throw"Both expiration_time and expiration_time_interval can't be set"}var ai=h._request("push",null,null,"POST",aj);return ai._thenRunCallbacks(ah)};return h}));